{% extends 'layout.html' %}

{% block title %} Dashboard: {% endblock %}

{% block content %}

<div class="row">
	<div class="col-md-3">
		<div class="clickback">
			<span class="glyphicon glyphicon-arrow-left"></span>	
			<p><a class="backlink" onclick="history.back(-1)"></a></p>
		</div>
	</div>
	<div class="col-md-6">
		<h2> General Server Statistics: </h2>
		<br><br>
		
		<table class="table">
			<tbody>
				<tr>
					<th> Users: </th>
					<th> {{ users_cnt }} </th>
				</tr>
				<tr>
					<th> Applications: </th>
					<th> {{ apps_cnt }} </th>
				</tr>
				<tr>
					<th> Devices: </th>
					<th> {{ dev_cnt }} </th>
				</tr>
			</tbody>
		</table>

		<br>
		{% if users %}
		<center><h3> List of users </h3>
		<div>
			<form action="dashboard" method="post" class="form-inline">
				<div class="form-group">
					<input type="text" maxlength="30" class="form-control" id="username" name="username" placeholder="Type username..."/>
				</div>
				<div class="form-group">
					<button type="submit" class="btn btn-default">Filter</button>
				</div>
				<a href="dashboard-clean-search"><span class="glyphicon glyphicon-remove"></span></a>
			</form>
		</div>
		<br>
		<div>
			<ol class="list-group" start="{{ usn }}">
       				{% for u in users %}
				<a href="users?name={{ u[0] }}">
					<li class="list-group-item">
						<strong> {{ u[0] }} </strong>
					</li>
				</a>
				{% endfor %}
			</ol>
		</div>

		<div>
			<nav aria-label="Page navigation">
				<ul class="pagination">
					{% if pp %}
					<li>
					{% else %}
					<li class="disabled">
					{% endif %}
						<a href="/dev-data-pg?p={{ pp }}" aria-label="Previous">
							<span aria-hidden="true">&laquo;</span>
						</a>
					</li>
					{% for i in range(pr[0],pr[1]) %}
						{% if i == cp %}
						<li class="active">
							<a href="/dev-data-pg?p={{ i }}">
								{{ i }}
								<span class="sr-only">(current)</span>
							</a>
						</li>
						{% else %}
						<li>
							<a href="/dev-data-pg?p={{ i }}"> {{ i }} </a>
						</li>
						{% endif %}
					{% endfor %}
					{% if np %}
					<li>
					{% else %}
					<li class="disabled">
					{% endif %}
						<a href="/dev-data-pg?p={{ np }}" aria-label="Next">
							<span aria-hidden="true">&raquo;</span>
						</a>
					</li>
				</ul>
			</nav>
		</div>

		{% else %}
		<p> No registered users. </p>
		{% endif %}
		<br><br>
		<a href="signup"><button class="btn btn-primary">Add New User</button></a>
		</center>
	</div>
</div>

{% endblock %}
